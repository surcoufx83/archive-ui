<ui-centered-busy-indicator *ngIf="usersettingsObj == undefined || file == undefined"></ui-centered-busy-indicator>

<ng-container *ngIf="usersettingsObj != undefined && file != undefined">
    <div class="container pt-4 pt-md-2 mb-2">
        <div class="pb-2 border-bottom border-secondary border-2 d-flex justify-content-between align-items-center">
            <h2 class="text-nowrap text-truncate">{{ i18n('file.title', [file.name]) }}</h2>
            <div class="ps-3 mb-2" *ngIf="file.fileexists">
                <a [routerLink]="['/file', file.id]" *ngIf="view === 'preview'" class="text-decoration-none">
                    <button type="button" class="form-control btn-sm btn-secondary text-nowrap">
                        <i [class]="config.icons['go-left'] + ' me-1'"></i>
                        {{ i18n('common.back') }}
                    </button>
                </a>
                <a [routerLink]="['/file', file.id, 'preview']" *ngIf="view !== 'preview'" class="text-decoration-none">
                    <button type="button" class="form-control btn-sm btn-secondary text-nowrap">
                        <i [class]="config.icons['preview'] + ' me-1'"></i>
                        {{ i18n('file.previewButton') }}
                    </button>
                </a>
            </div>
        </div>
    </div>

    <ng-container *ngIf="view === 'preview' && recentVersion">
        <div class="container pt-4 pt-md-2 mb-2 ratio-2x3">
            <ng-container *ngIf="getViewer() == 'ng2-pdfjs-viewer'">
                <ng2-pdfjs-viewer #pdfViewer></ng2-pdfjs-viewer>
            </ng-container>
            <ng-container *ngIf="getViewer() == 'plaintext'">
                <div class="card col-12">
                    <div class="card-body">
                        <pre class="codeblock linenumbers"><code><ul class="p-0"><li *ngFor="let line of textcontent; let i = index" class="d-flex"><div class="counter">{{ (i+1) }}</div><div class="content flex-shrink-1">{{ line }}</div></li></ul></code></pre>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="getViewer() == 'html'">
                <div class="card col-12 w-100 h-100">
                    <div class="card-body">
                        <iframe #htmlViewer class="w-100 h-100" src="about:blank"></iframe>
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-container>

</ng-container>