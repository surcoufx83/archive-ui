<ui-centered-busy-indicator *ngIf="usersettingsObj == undefined"></ui-centered-busy-indicator>

<div>

    <div class="container pt-4 pt-md-2 mb-2">
        <div class="pb-2 border-bottom border-secondary border-2 d-flex justify-content-between">
            <h2>{{ i18n('notepad.title') }}</h2>
            <div class="d-flex flex-column">
                <nav class="mb-2" style="--bs-breadcrumb-divider: '';" aria-label="breadcrumb">
                    <ol class="breadcrumb d-flex align-items-center h-100 mb-0">
                        <li [ngClass]="{'breadcrumb-item fade': true, 'show': busy}">
                            <ui-busy-indicator></ui-busy-indicator>
                        </li>
                        <li class="breadcrumb-item">
                            <button type="button"
                                [ngClass]="['btn btn-sm', sortby == 'name' ? 'btn-success' : 'btn-outline-secondary']"
                                (click)="sort('name', sortby !== 'name' ? null : !sortasc)">
                                <i [class]="'fa-solid fa-a me-1'"></i>
                                <span class="fs-8" *ngIf="sortasc">▲</span>
                                <span class="fs-8" *ngIf="!sortasc">▼</span>
                            </button>
                        </li>
                        <li class="breadcrumb-item">
                            <button type="button"
                                [ngClass]="['btn btn-sm', sortby == 'edit' ? 'btn-success' : 'btn-outline-secondary']"
                                (click)="sort('edit', sortby !== 'edit' ? null : !sortasc)">
                                <i [class]="'fa-solid fa-calendar-day me-1'"></i>
                                <span class="fs-8" *ngIf="sortasc">▲</span>
                                <span class="fs-8" *ngIf="!sortasc">▼</span>
                            </button>
                        </li>
                        <li class="breadcrumb-item">
                            <button type="button" class="btn btn-sm btn-outline-primary">
                                <i [class]="config.icons['add'] + ' me-1'"></i>
                                {{ i18n('common.add') }}
                            </button>
                        </li>
                    </ol>
                </nav>
                <div>
                    <div class="input-group">
                        <input type="text" class="form-control form-control-sm"
                            [placeholder]="i18n('notepad.filterPlaceholder')"
                            aria-describedby="notes-filter-btn" id="notes-filter"
                            name="notes-filter" [(ngModel)]="filterphrase"
                            (keyup)="filterKeyup();">
                        <button class="btn btn-sm btn-secondary" id="notes-filter-btn"
                            for="notes-filter">
                            <i [class]="config.icons['search']"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="flex-table flex-table-sm mb-3">
            <ng-container *ngFor="let note of notes; let i = index;">
                <div class="flex-table-body row" *ngIf="note.show">
                    <div class="d-flex justify-content-between align-items-top my-3 my-lg-2">
                        <div>
                            <div>
                                <h4>{{ note.title }}</h4>
                            </div>
                            <div>
                                <p class="ws-pre-wrap">
                                    {{ note.content }}
                                </p>
                            </div>
                        </div>
                        <div class="overflow-visible text-nowrap">
                            <button type="button" class="btn btn-sm btn-outline-primary ms-2">
                                <i [class]="config.icons['edit']"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-danger ms-2">
                                <i [class]="config.icons['delete']"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>